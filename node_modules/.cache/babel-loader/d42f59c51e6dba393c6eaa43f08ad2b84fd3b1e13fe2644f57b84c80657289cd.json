{"ast":null,"code":"import React from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{addItem}from\"../../redux/cart/slice\";import{selectCartItemById}from'../../redux/cart/selectors';import{Link}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const typeNames=['тонкое','традиционное'];export const PizzaBlock=_ref=>{let{id,title,price,imageUrl,sizes,types}=_ref;const[activeType,setActiveType]=React.useState(0);const[activeSize,setActiveSize]=React.useState(0);const cartItem=useSelector(selectCartItemById(id));const dispatch=useDispatch();const addedCount=cartItem?cartItem.count:0;const onClickAdd=()=>{const item={id,title,price,imageUrl,type:typeNames[activeType],size:sizes[activeSize],count:0};dispatch(addItem(item));};return/*#__PURE__*/_jsx(\"div\",{className:\"pizza-block-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"pizza-block\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/pizza/\".concat(id),children:[/*#__PURE__*/_jsx(\"img\",{className:\"pizza-block__image\",src:imageUrl,alt:\"Pizza\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"pizza-block__title\",children:title})]},id),/*#__PURE__*/_jsxs(\"div\",{className:\"pizza-block__selector\",children:[/*#__PURE__*/_jsx(\"ul\",{children:types.map(typeId=>/*#__PURE__*/_jsx(\"li\",{className:activeType===typeId?'active':'',onClick:()=>setActiveType(typeId),children:typeNames[typeId]},typeId))}),/*#__PURE__*/_jsx(\"ul\",{children:sizes.map((size,i)=>/*#__PURE__*/_jsxs(\"li\",{className:activeSize===i?'active':'',onClick:()=>setActiveSize(i),children:[size,\" \\u0441\\u043C.\"]},size))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pizza-block__bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pizza-block__price\",children:[\"\\u043E\\u0442 \",price,\" \\u20BD\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"button button--outline button--add\",onClick:()=>onClickAdd(),children:[/*#__PURE__*/_jsx(\"svg\",{width:\"12\",height:\"12\",viewBox:\"0 0 12 12\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M10.8 4.8H7.2V1.2C7.2 0.5373 6.6627 0 6 0C5.3373 0 4.8 0.5373 4.8 1.2V4.8H1.2C0.5373 4.8 0 5.3373 0 6C0 6.6627 0.5373 7.2 1.2 7.2H4.8V10.8C4.8 11.4627 5.3373 12 6 12C6.6627 12 7.2 11.4627 7.2 10.8V7.2H10.8C11.4627 7.2 12 6.6627 12 6C12 5.3373 11.4627 4.8 10.8 4.8Z\",fill:\"white\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"}),addedCount>0&&/*#__PURE__*/_jsx(\"i\",{children:addedCount})]})]})]})});};","map":{"version":3,"names":["React","useDispatch","useSelector","addItem","selectCartItemById","Link","jsx","_jsx","jsxs","_jsxs","typeNames","PizzaBlock","_ref","id","title","price","imageUrl","sizes","types","activeType","setActiveType","useState","activeSize","setActiveSize","cartItem","dispatch","addedCount","count","onClickAdd","item","type","size","className","children","to","concat","src","alt","map","typeId","onClick","i","width","height","viewBox","fill","xmlns","d"],"sources":["/home/splee/Документы/react-pizza/src/components/PizzaBlock/index.tsx"],"sourcesContent":["import React from \"react\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { addItem } from \"../../redux/cart/slice\"\nimport { selectCartItemById } from '../../redux/cart/selectors'\nimport { ICartItem } from \"../../redux/cart/types\"\nimport { Link } from \"react-router-dom\"\n\ntype PizzaBlockProps = {\n  id: string,\n  title: string,\n  price: number,\n  imageUrl: string,\n  sizes: number[],\n  types: number[]\n}\n\nconst typeNames = ['тонкое', 'традиционное']\nexport const PizzaBlock: React.FC<PizzaBlockProps> = ({\n  id,\n  title,\n  price,\n  imageUrl,\n  sizes,\n  types\n}) => {\n  const [activeType, setActiveType] = React.useState(0)\n  const [activeSize, setActiveSize] = React.useState(0)\n\n  const cartItem = useSelector(selectCartItemById(id))\n\n  const dispatch = useDispatch()\n\n  const addedCount = cartItem ? cartItem.count : 0\n\n  const onClickAdd = () => {\n    const item: ICartItem = {\n      id,\n      title,\n      price,\n      imageUrl,\n      type: typeNames[activeType],\n      size: sizes[activeSize],\n      count: 0\n    }\n    dispatch(addItem(item))\n  }\n\n  return (\n    <div className=\"pizza-block-wrapper\">\n      <div className=\"pizza-block\">\n        <Link key={id} to={`/pizza/${id}`}>\n        <img className=\"pizza-block__image\" src={imageUrl} alt=\"Pizza\" />\n        <h4 className=\"pizza-block__title\">{title}</h4>\n        </Link>\n        <div className=\"pizza-block__selector\">\n          <ul>\n            {\n              types.map((typeId) => (\n                <li key={typeId} className={activeType === typeId ? 'active' : ''} onClick={() => setActiveType(typeId)}>{typeNames[typeId]}</li>\n              ))\n            }\n          </ul>\n          <ul>\n            {\n              sizes.map((size, i) => <li key={size} className={activeSize === i ? 'active' : ''} onClick={() => setActiveSize(i)}>{size} см.</li>)\n            }\n          </ul>\n        </div>\n        <div className=\"pizza-block__bottom\">\n          <div className=\"pizza-block__price\">от {price} ₽</div>\n          <button className=\"button button--outline button--add\" onClick={() => onClickAdd()}>\n            <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M10.8 4.8H7.2V1.2C7.2 0.5373 6.6627 0 6 0C5.3373 0 4.8 0.5373 4.8 1.2V4.8H1.2C0.5373 4.8 0 5.3373 0 6C0 6.6627 0.5373 7.2 1.2 7.2H4.8V10.8C4.8 11.4627 5.3373 12 6 12C6.6627 12 7.2 11.4627 7.2 10.8V7.2H10.8C11.4627 7.2 12 6.6627 12 6C12 5.3373 11.4627 4.8 10.8 4.8Z\" fill=\"white\"></path>\n            </svg>\n            <span>Добавить</span>\n            {addedCount > 0 && <i>{addedCount}</i>}\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}