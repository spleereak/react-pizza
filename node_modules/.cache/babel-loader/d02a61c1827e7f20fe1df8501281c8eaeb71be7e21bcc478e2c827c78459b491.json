{"ast":null,"code":"import _objectSpread from\"/home/splee/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/react-pizza/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createSlice}from\"@reduxjs/toolkit\";import{getCartFromLS}from\"../../utils/getCartFromLS\";import{calcTotalPrice}from\"../../utils/calcTotalPrice\";const{items,totalPrice}=getCartFromLS();const initialState={totalPrice,items};const cartSlice=createSlice({name:'cart',initialState,reducers:{addItem(state,action){const findItem=state.items.find(obj=>obj.id===action.payload.id);if(findItem){findItem.count++;}else{state.items.push(_objectSpread(_objectSpread({},action.payload),{},{count:1}));}state.totalPrice=calcTotalPrice(state.items);},incItem(state,action){const findItem=state.items.find(obj=>obj.id===action.payload);if(findItem){findItem.count++;}state.totalPrice=state.items.reduce((sum,obj)=>{return obj.price*obj.count+sum;},0);},decItem(state,action){const findItem=state.items.find(obj=>obj.id===action.payload);if(findItem){findItem.count--;state.totalPrice-=findItem.price;if(findItem.count===0){state.items=state.items.filter(obj=>obj.id!==action.payload);}}},clearItems(state){state.items=[];state.totalPrice=0;},removeItem(state,action){const findItem=state.items.find(obj=>obj.id===action.payload);if(findItem){state.items=state.items.filter(obj=>obj.id!==action.payload);state.totalPrice-=findItem.price*findItem.count;}}}});export const{addItem,removeItem,clearItems,incItem,decItem}=cartSlice.actions;export default cartSlice.reducer;","map":{"version":3,"names":["createSlice","getCartFromLS","calcTotalPrice","items","totalPrice","initialState","cartSlice","name","reducers","addItem","state","action","findItem","find","obj","id","payload","count","push","_objectSpread","incItem","reduce","sum","price","decItem","filter","clearItems","removeItem","actions","reducer"],"sources":["/home/splee/Документы/react-pizza/src/redux/cart/slice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { getCartFromLS } from \"../../utils/getCartFromLS\";\nimport { calcTotalPrice } from \"../../utils/calcTotalPrice\";\nimport { CartSliceState, ICartItem } from \"./types\";\n\nconst { items, totalPrice } = getCartFromLS()\n\nconst initialState: CartSliceState = {\n  totalPrice,\n  items\n}\n\nconst cartSlice = createSlice({\n  name: 'cart',\n  initialState,\n  reducers: {\n    addItem(state, action: PayloadAction<ICartItem>) {\n      const findItem = state.items.find((obj) => obj.id === action.payload.id);\n\n      if (findItem) {\n        findItem.count++;\n      } else {\n        state.items.push({\n          ...action.payload,\n          count: 1\n        })\n      }\n\n      state.totalPrice = calcTotalPrice(state.items)\n    },\n    incItem(state, action: PayloadAction<string>) {\n      const findItem = state.items.find((obj) => obj.id === action.payload);\n      if (findItem) {\n        findItem.count++;\n      }\n      state.totalPrice = state.items.reduce((sum, obj) => {\n        return (obj.price * obj.count) + sum\n      }, 0);\n    },\n    decItem(state, action: PayloadAction<string>) {\n      const findItem = state.items.find((obj) => obj.id === action.payload)\n\n      if (findItem) {\n        findItem.count--;\n        state.totalPrice -= findItem.price;\n\n        if (findItem.count === 0) {\n          state.items = state.items.filter((obj) => obj.id !== action.payload);\n        }\n      }\n    },\n    clearItems(state) {\n      state.items = []\n      state.totalPrice = 0\n    },\n    removeItem(state, action: PayloadAction<string>) {\n      const findItem = state.items.find((obj) => obj.id === action.payload)\n      if (findItem) {\n        state.items = state.items.filter((obj) => obj.id !== action.payload)\n        state.totalPrice -= findItem.price * findItem.count;\n      }\n    } \n  }\n})\n\nexport const { addItem, removeItem, clearItems, incItem, decItem } = cartSlice.actions\n\nexport default cartSlice.reducer\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}